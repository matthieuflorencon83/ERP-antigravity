{% for art in page_obj %}
    <tr class="cursor-pointer"
        onclick="handleRowClick(event, this)"
        hx-get="{% url 'article_edit' art.pk %}"
        hx-target="#detailSidebarContent"
        hx-swap="innerHTML"
        hx-trigger="click">
        <!-- Col 1: Name & Ref loop -->
        <td class="text-truncate max-w-0">
            <div class="d-flex align-items-center">
                <div class="me-3 d-none d-sm-block flex-shrink-0">
                    <div class="rounded-circle bg-light d-flex align-items-center justify-content-center text-muted border avatar-sm">
                        <i class="bi bi-box"></i>
                    </div>
                </div>
                <div class="text-truncate">
                    <div class="text-primary-header text-truncate"
                         title="{{ art.designation }}">
                        {{ art.designation }}
                    </div>
                    <div class="text-secondary-sub font-monospace text-truncate">
                        {{ art.code_article|default:"-" }}
                        {% if art.ref_fournisseur %}
                            <span class="ms-1 text-muted text-truncate">
                                • Ref: {{ art.ref_fournisseur }}
                            </span>
                        {% endif %}
                    </div>
                </div>
            </div>
        </td>
        <!-- Col 2: Fournisseur -->
        <td class="text-truncate max-w-0">
            {% if art.fournisseur %}
                <span class="badge badge-soft-primary text-truncate d-inline-block align-middle max-w-100">
                    <i class="bi bi-building me-1 opacity-50"></i>{{ art.fournisseur.nom_fournisseur }}
                </span>
            {% else %}
                <span class="badge badge-soft-secondary">
                    Non assigné
                </span>
            {% endif %}
        </td>
    </tr>
{% empty %}
    <tr>
        <td colspan="2" class="text-center py-5">
            <div class="text-muted mb-3 opacity-50">
                <i class="bi bi-inbox fs-1"></i>
            </div>
            <h6 class="text-muted fw-bold">
                Aucun article trouvé
            </h6>
            <p class="text-muted small">
                Essayez de modifier votre recherche ou créez un nouvel article.
            </p>
        </td>
    </tr>
{% endfor %}
