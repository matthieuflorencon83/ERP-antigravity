/* assets/css/antigravity.css - VERSION ARCHITECTURE PROPRE (2025) */

/* =========================================================================
   1. DESIGN SYSTEM & TOKENS (S.S.O.T - Single Source of Truth)
   ========================================================================= */
:root {
    /* --- PALETTE DE COULEURS (Strict naming) --- */
    --primary-color: #0f4c75;
    /* Bleu Profond */
    --primary-dark: #0a3655;
    /* Bleu Nuit */
    --secondary-color: #3282b8;
    /* Bleu Ciel */
    --accent-color: #bbe1fa;
    /* Bleu Glace */
    --text-color: #333333;
    --text-secondary: #6c757d;
    --text-light: #ffffff;
    --bg-color: linear-gradient(135deg, #f5f7fa 0%, #e4e7eb 100%);
    --bg-card: #ffffff;
    --table-stripe-bg: rgba(0, 0, 0, 0.02);

    /* --- ALIAS LEGACY (Compatibilité) --- */
    --ag-primary: var(--primary-color);
    --ag-primary-dark: var(--primary-dark);
    --ag-secondary: var(--secondary-color);
    --ag-accent: var(--accent-color);
    --text-main: var(--text-color);
    --bg-body: var(--bg-color);

    /* --- ÉTATS & SENTIMENTS --- */
    --state-success: #28a745;
    --state-warning: #ffc107;
    --state-danger: #dc3545;
    --state-info: #17a2b8;

    /* --- SPACING & DIMENSIONS --- */
    --spacing-std: 20px;
    --spacing-sm: 10px;
    --spacing-xs: 5px;
    --header-height: 135px;
    --sidebar-width: 250px;
    --radius-main: 12px;
    --radius-sm: 6px;

    /* --- TYPOGRAPHY --- */
    --font-main: 'Inter', sans-serif;

    /* --- Z-INDEX LAYERS (Topographie Verticale) --- */
    --z-base: 1;
    --z-navbar: 1050;
    --z-dropdown: 1060;
    --z-modal-backdrop: 1080;
    --z-modal: 1090;
    --z-toast: 1100;

    /* --- OMBRES & EFFETS --- */
    --shadow-soft: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
    --shadow-card: 0 4px 6px rgba(0, 0, 0, 0.05);
    --shadow-hover: 0 10px 30px rgba(0, 0, 0, 0.15);
    --blur-glass: blur(10px);
}

[data-bs-theme="dark"] {
    --primary-color: #3282b8;
    /* Plus clair sur fond sombre */
    --primary-dark: #0f4c75;
    --secondary-color: #0f4c75;
    --accent-color: #1b262c;
    --text-color: #e0e0e0;
    --text-secondary: #a0a0a0;
    --text-light: #ffffff;
    --bg-color: linear-gradient(135deg, #1b262c 0%, #0f4c75 100%);
    --bg-card: #2c3e50;
    /* Gris bleu sombre */
    --table-stripe-bg: rgba(255, 255, 255, 0.05);

    /* Alias update */
    --ag-primary: var(--primary-color);
    --bg-body: var(--bg-color);
}

/* HEADER SPECIFIC UTILITIES (Extraction Phase 2) */
/* User Menu Position Fix */
.ag-user-menu {
    right: 0 !important;
    left: auto !important;
    transform: none !important;
}

/* Offcanvas Customization */
.offcanvas-end {
    border-left: 1px solid rgba(255, 255, 255, 0.1);
}

.offcanvas-header {
    background: linear-gradient(90deg, var(--ag-primary) 0%, #0a2e46 100%);
    color: var(--text-light);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

/* Ensure it doesn't overflow on small screens */
@media (max-width: 576px) {
    .ag-dropdown-notif {
        width: 300px;
        right: -50px;
        /* Slight offset correction for mobile */
    }
}

.ag-notif-scroll {
    max-height: 300px;
    overflow-y: auto;
}

/* =========================================================================
   2. GLOBAL RESET & BASE
   ========================================================================= */
body {
    font-family: 'Inter', sans-serif;
    background: var(--bg-body);
    min-height: 100vh;
    color: var(--text-main);
    padding-top: 0;
}

/* --- CONTENEUR PRINCIPAL --- */
.ag-main-content {
    padding-top: var(--header-height);
    /* UTILISATION VARIABLE */
    min-height: 100vh;
    position: relative;
    z-index: var(--z-base);
}

/* =========================================================================
   3. COMPOSANTS NAVIGATION (HEADER)
   ========================================================================= */

/* --- NAVBAR PRINCIPALE --- */
.navbar-ag,
.ag-navbar {
    background: linear-gradient(90deg, var(--ag-primary) 0%, #0a2e46 100%) !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    padding: 0.8rem 1rem;
    -webkit-backdrop-filter: var(--blur-glass);
    backdrop-filter: var(--blur-glass);
    z-index: var(--z-navbar);
}

.navbar-brand {
    font-weight: 800;
    letter-spacing: 1px;
    font-size: 1.4rem;
}

/* --- LIENS DE NAVIGATION --- */
/* --- LIENS DE NAVIGATION (HEADER ONLY) --- */
.navbar-nav .nav-link,
.navbar-nav .ag-nav-link {
    font-weight: 500;
    text-transform: uppercase;
    font-size: 0.9rem;
    padding: 0.5rem 1rem !important;
    transition: all 0.2s;
    color: rgba(255, 255, 255, 0.95) !important;
    /* Force White in Header */
    border-bottom: 3px solid transparent;
}

/* BRAND VISIBILITY FIX */
.navbar-brand,
.navbar-brand i {
    color: #ffffff !important;
    /* Force logo and text to pure white */
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* RESET TABS (Fix Blanc sur Blanc) */
.nav-tabs .nav-link {
    color: var(--primary-color) !important;
    background: transparent;
    border: 1px solid transparent;
}

.nav-tabs .nav-link:hover {
    color: var(--primary-dark) !important;
    border-color: #e9ecef #e9ecef #dee2e6;
}

.nav-tabs .nav-link.active {
    color: #495057 !important;
    background-color: #fff;
    border-color: #dee2e6 #dee2e6 #fff;
}

/* Hover & Active States */
.nav-link:hover,
.nav-link.active,
.ag-nav-link:hover,
.ag-nav-link.active {
    color: var(--text-light) !important;
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--radius-sm);
    /* Note: ag-nav-link uses border-bottom instead of bg radius, keeping compat */
}

/* --- DROPDOWNS --- */
.dropdown-menu,
.ag-dropdown-menu {
    border: none;
    border-radius: 8px;
    box-shadow: var(--shadow-hover);
    top: 100%;
    left: 0;
    margin-top: 0;
    z-index: var(--z-dropdown);
}

/* FIX DROPDOWN HOVER (Restoration) */
.ag-dropdown-container {
    position: relative;
}

.ag-dropdown-container:hover .ag-dropdown-menu {
    display: block;
    animation: fadeInDropdown 0.2s ease forwards;
}

@keyframes fadeInDropdown {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.dropdown-item {
    padding: 10px 20px;
    font-weight: 500;
    color: #444;
    transition: background 0.2s;
}

.dropdown-item:hover {
    background-color: #f0f4f8;
    color: var(--ag-primary);
    padding-left: 1.5rem;
    /* Slide Effect */
}

.dropdown-item i {
    width: 20px;
    text-align: center;
    color: var(--ag-secondary);
}

/* =========================================================================
   4. COMPOSANTS DASHBOARD & CARTES
   ========================================================================= */
.card-ag {
    background: var(--bg-card);
    border: none;
    border-radius: var(--radius-main);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    margin-bottom: 25px;
}

.card-ag-header {
    padding: 20px;
    border-bottom: 1px solid #eee;
    font-weight: 600;
    color: var(--ag-primary);
    background: transparent;
}

/* --- STAT CARDS (TUILES) --- */
/* (Glassmorphism & Gradients extracted from dashboard.php) */

.stat-card {
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    /* Glass Effect Base */
    background: rgba(255, 255, 255, 0.1);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    overflow: hidden;
    position: relative;
    height: 100%;
    cursor: pointer;
    z-index: 1;
}

.stat-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
    background: rgba(255, 255, 255, 0.15);
}

/* --- VARIANTES COULEURS --- */
.stat-card.bg-warning {
    background: linear-gradient(135deg, #f59e0b, #d97706) !important;
    border-color: rgba(245, 158, 11, 0.3);
}

.stat-card.bg-primary {
    background: linear-gradient(135deg, #0f4c75, #1e6091) !important;
    border-color: rgba(15, 76, 117, 0.3);
}

.stat-card.bg-info {
    background: linear-gradient(135deg, #0d9488, #0f766e) !important;
    border-color: rgba(13, 148, 136, 0.3);
}

.stat-card.bg-success {
    background: linear-gradient(135deg, #10b981, #059669) !important;
    border-color: rgba(16, 185, 129, 0.3);
}

/* --- STAT CARD ELEMENTS --- */
.stat-icon {
    font-size: 1.5rem;
    opacity: 0.2;
    position: absolute;
    right: 15px;
    top: 15px;
    z-index: 1;
    color: inherit;
}

.stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    line-height: 1;
    margin-bottom: 0;
    position: relative;
    z-index: 2;
    color: white !important;
}

.stat-label {
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    opacity: 0.9;
    margin: 0;
    position: relative;
    z-index: 2;
    padding-top: 2px;
    color: rgba(255, 255, 255, 0.9) !important;
}

/* --- COULEURS CONTEXTUELLES (FORCE TEXTE BLANC) --- */
.stat-card[class*="bg-"] .stat-value,
.stat-card[class*="bg-"] .stat-label,
.stat-card[class*="bg-"] .text-white-50 {
    color: var(--text-light) !important;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;
    opacity: 1 !important;
}

/* --- SCROLL LIST (INTERNE AUX TUILES) --- */
.stat-list-wrapper {
    height: 145px;
    overflow: hidden;
    position: relative;
    margin-top: 5px;
    z-index: 5;
    /* Masks for fade effect */
    -webkit-mask-image: linear-gradient(to bottom, transparent, black 10%, black 90%, transparent);
    mask-image: linear-gradient(to bottom, transparent, black 10%, black 90%, transparent);
}

.stat-list-scroll {
    animation: scrollVertical 20s linear infinite;
}

.stat-list-wrapper:hover .stat-list-scroll {
    animation-play-state: paused;
}

.stat-list-item {
    padding: 8px 5px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.15);
    font-size: 0.8rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    transition: background 0.2s;
    color: white;
}

.stat-list-item:hover {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
}

.stat-item-sub {
    color: rgba(255, 255, 255, 0.7) !important;
}

/* Animation Keyframes */
@keyframes scrollVertical {
    0% {
        transform: translateY(0);
    }

    100% {
        transform: translateY(-50%);
    }
}

/* =========================================================================
   5. TICKERS & ALERTES (ANIMATIONS)
   ========================================================================= */
.alert-ticker {
    background: var(--ag-primary-dark);
    color: var(--text-light);
    font-size: 0.9rem;
    font-weight: 500;
    height: 40px;
    line-height: 40px;
    overflow: hidden;
    white-space: nowrap;
    position: relative;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.ticker-carousel {
    display: inline-block;
    padding-left: 0;
    animation: marqueeScroll 60s linear infinite;
    white-space: nowrap;
}

.ticker-slide {
    display: inline-block;
    margin-right: 60vw;
}

@keyframes marqueeScroll {
    0% {
        transform: translate3d(100vw, 0, 0);
    }

    100% {
        transform: translate3d(-100%, 0, 0);
    }
}

.alert-ticker:hover .ticker-carousel {
    animation-play-state: paused;
}

/* =========================================================================
   6. UTILITAIRES & MODALES
   ========================================================================= */
.btn-primary {
    background-color: var(--ag-primary);
    border-color: var(--ag-primary);
}

.btn-primary:hover {
    background-color: var(--ag-primary-dark);
}

.btn-petrol {
    background-color: #005f6b;
    border-color: #005f6b;
    color: white;
}

.btn-petrol:hover {
    background-color: #004a53;
    border-color: #004a53;
    color: white;
}

.btn-accent {
    background-color: var(--ag-accent);
    border-color: var(--ag-accent);
    color: var(--ag-primary);
    font-weight: 600;
}

.btn-accent:hover {
    background-color: #a0cfee;
    color: var(--ag-primary-dark);
}

/* Secure Modal Z-Index Utility */
.modal-secure {
    z-index: var(--z-modal) !important;
}

.modal-backdrop-secure {
    z-index: var(--z-modal-backdrop) !important;
}

/* Notification Bell Animation */
#notificationBell:hover {
    color: white;
    transform: scale(1.1);
    animation: ring 0.5s ease-in-out;
}

@keyframes ring {

    0%,
    100% {
        transform: rotate(0deg);
    }

    10%,
    30%,
    50%,
    70%,
    90% {
        transform: rotate(-10deg);
    }

    20%,
    40%,
    60%,
    80% {
        transform: rotate(10deg);
    }
}

/* --- NAV DROPDOWN HOVER (Requested by User) --- */



/* 7. POLISH PACK 2025 (FINITION PREMIUM) - END */

/* =========================================================================
   9. NEO-GLASS UTILITIES (DESKTOP POLISH)
   ========================================================================= */

/* Transparence & Flou - Table Rows */
/* Transparence & Flou - Div-based Rows (Task List) */
.list-group-flush .list-group-item {
    background-color: transparent !important;
    /* Reset default */
    border: none !important;
    padding: 0 0 8px 0 !important;
    /* Spacing between rows */
}

.list-group-flush .task-row {
    background-color: rgba(255, 255, 255, 0.05) !important;
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s !important;
    border-radius: 8px !important;
    border: 1px solid rgba(255, 255, 255, 0.1);
    margin-bottom: 8px;
    /* Floating gap */
    padding: 25px 20px !important;
    /* Internal spacing INCREASED DRAMATICALLY for touch targets */
}

.list-group-flush .task-row:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1) !important;
    background-color: rgba(255, 255, 255, 0.1) !important;
    z-index: 2;
}

/* Header styling alignment */
.task-header {
    padding: 12px 15px;
    margin-bottom: 8px;
    border-radius: 8px;
    background: linear-gradient(90deg, var(--ag-primary) 0%, var(--ag-primary-dark) 100%);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Legacy Table Glass (Kept for reference if needed later) */
.table-glass {
    border-collapse: separate !important;
    border-spacing: 0 8px !important;
}

.table-glass tbody tr {
    background-color: rgba(255, 255, 255, 0.05) !important;
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s;
    border-radius: 8px;
}

/* Badges "Glass" */
.badge-glass {
    background: rgba(255, 255, 255, 0.15) !important;
    -webkit-backdrop-filter: blur(4px);
    backdrop-filter: blur(4px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: var(--text-light) !important;
    /* Force White Text */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

.badge-glass.bg-danger {
    background: rgba(220, 53, 69, 0.2) !important;
    border-color: rgba(220, 53, 69, 0.4);
    color: #ff6b6b !important;
}

.badge-glass.bg-info {
    background: rgba(13, 202, 240, 0.15) !important;
    border-color: rgba(13, 202, 240, 0.4);
    color: #4dd0e1 !important;
}

.badge-glass.bg-light {
    background: rgba(255, 255, 255, 0.1) !important;
    border-color: rgba(255, 255, 255, 0.2);
    color: #e0e0e0 !important;
}

/* Main Container (The Box itself) */
.select2-container--bootstrap-5 .select2-selection {
    background-color: #ffffff !important;
    border-color: #ced4da !important;
    color: #000000 !important;
    min-width: 120px !important;
}

.select2-container--bootstrap-5 .select2-selection--single {
    height: auto !important;
    min-height: 31px !important;
}

.select2-container--bootstrap-5 .select2-selection--single .select2-selection__rendered {
    color: #000000 !important;
    opacity: 1 !important;
    font-weight: 600 !important;
    overflow: visible !important;
    text-overflow: clip !important;
    white-space: nowrap !important;
    padding-right: 35px !important;
    line-height: 29px !important;
    display: block !important;
    width: 100% !important;
}

/* Force black color on all child elements */
.select2-container--bootstrap-5 .select2-selection--single .select2-selection__rendered * {
    color: #000000 !important;
    opacity: 1 !important;
    font-weight: 600 !important;
}

/* Placeholder styling - light gray when empty */
.select2-container--bootstrap-5 .select2-selection--single .select2-selection__placeholder {
    color: #6c757d !important;
    opacity: 0.5 !important;
    font-weight: 400 !important;
}

/* Dropdown Menu (The List) - Light Theme */
.select2-container--bootstrap-5 .select2-dropdown {
    background-color: #ffffff !important;
    border-color: #ced4da !important;
    color: #000000 !important;
}

/* Search Box (The input inside the dropdown) - Keep White */
.select2-container--bootstrap-5 .select2-search__field {
    background-color: #ffffff !important;
    color: #000000 !important;
    border: 1px solid #ced4da !important;
}

/* Fix Z-Index for Select2 in Modals */
.select2-container {
    z-index: 999999 !important;
}

.select2-dropdown {
    z-index: 999999 !important;
}

/* List Options - Black text on white */
.select2-container--bootstrap-5 .select2-results__option {
    color: #000000 !important;
    background-color: #ffffff !important;
}

/* Highlighted (Hover) Option - Light gray */
.select2-container--bootstrap-5 .select2-results__option--highlighted {
    background-color: #e9ecef !important;
    color: #000000 !important;
}

/* Selected Option - Primary blue */
.select2-container--bootstrap-5 .select2-results__option[aria-selected="true"] {
    background-color: var(--ag-primary) !important;
    color: #fff !important;
}

/* Fix "Clear" X button */
.select2-container--bootstrap-5 .select2-selection__clear {
    color: #000000 !important;
    opacity: 0.7;
}

.select2-container--bootstrap-5 .select2-selection__clear:hover {
    color: #dc3545 !important;
    opacity: 1;
}

/* --- MICRO-INTERACTIONS --- */
/* Boutons : Effet Organique */
.btn {
    border-radius: 50px !important;
    /* Pill style standard */
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    /* Bouncy transition */
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 600;
    font-size: 0.85rem;
    padding: 0.6rem 1.5rem;
}

.btn:active {
    transform: scale(0.95);
    /* Tactile feedback */
}

/* Liens : Underline animé */
a:not(.btn):not(.nav-link):not(.dropdown-item):not(.card-link) {
    position: relative;
    text-decoration: none;
    color: var(--ag-primary);
}

a:not(.btn):not(.nav-link):not(.dropdown-item):not(.card-link)::after {
    content: '';
    position: absolute;
    width: 100%;
    transform: scaleX(0);
    height: 2px;
    bottom: -2px;
    left: 0;
    background-color: var(--ag-secondary);
    transform-origin: bottom right;
    transition: transform 0.25s ease-out;
}

a:not(.btn):not(.nav-link):not(.dropdown-item):not(.card-link):hover::after {
    transform: scaleX(1);
    transform-origin: bottom left;
}

/* --- ANIMATIONS D'ENTRÉE --- */
/* Fade In Staggered pour les listes et tableaux */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translate3d(0, 20px, 0);
    }

    to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
    }
}

.table tbody tr,
.list-group-item,
.card-body .row>div {
    animation: fadeInUp 0.5s ease-out both;
}

/* Staggering (Décalage) jusqu'à 10 éléments */
.table tbody tr:nth-child(1) {
    animation-delay: 0.05s;
}

.table tbody tr:nth-child(2) {
    animation-delay: 0.1s;
}

.table tbody tr:nth-child(3) {
    animation-delay: 0.15s;
}

.table tbody tr:nth-child(4) {
    animation-delay: 0.2s;
}

.table tbody tr:nth-child(5) {
    animation-delay: 0.25s;
}

.table tbody tr:nth-child(6) {
    animation-delay: 0.3s;
}

.table tbody tr:nth-child(7) {
    animation-delay: 0.35s;
}

.table tbody tr:nth-child(8) {
    animation-delay: 0.4s;
}

.table tbody tr:nth-child(9) {
    animation-delay: 0.45s;
}

.table tbody tr:nth-child(10) {
    animation-delay: 0.5s;
}

/* --- CARTES ET CONTAINERS --- */
.card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: none !important;
    overflow: hidden;
    /* Pour contenir les effets */
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1) !important;
}

/* Modales : Entrée Elastic */
.modal.fade .modal-dialog {
    transform: scale(0.8);
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.modal.show .modal-dialog {
    transform: scale(1);
}

/* Inputs : Focus Glow */
.form-control:focus,
.form-select:focus {
    box-shadow: 0 0 0 4px rgba(50, 130, 184, 0.2);
    /* Glow soft blue */
    border-color: var(--ag-secondary);
}

/* =========================================================================
   8. FIX CONTRASTE & TABLEAUX (HIGH CONTRAST PROTOCOL)
   ========================================================================= */

/* 1. TABLEAU ANTIGRAVITY v2.0 (MODERNE & LISIBLE) */
.table {
    border-collapse: separate;
    border-spacing: 0;
    width: 100%;
    border-radius: var(--radius-sm);
    overflow: hidden;
    /* Arrondis les coins */
}

/* En-tête : Fond Sombre -> Texte BLANC */
.table thead th {
    background-color: var(--primary-color) !important;
    color: #ffffff !important;
    border-bottom: 2px solid rgba(0, 0, 0, 0.1);
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.85rem;
    padding: 12px 15px;
    letter-spacing: 0.5px;
    vertical-align: middle;
}

/* Corps : Fond Clair -> Texte SOMBRE */
.table tbody td {
    vertical-align: middle;
    color: var(--text-color) !important;
    /* Force le noir/gris */
    border-bottom: 1px solid #eee;
    padding: 12px 15px;
    font-size: 0.95rem;
}

/* Row Hover : Légère surbrillance */
.table-hover tbody tr:hover {
    background-color: rgba(50, 130, 184, 0.05) !important;
}

/* 2. CHASSE AUX FANTÔMES (BLANC SUR BLANC) */
/* Force le texte sombre par défaut dans les cartes et modales */
.card,
.modal-content,
.bg-white {
    color: var(--text-color);
}

/* Exception : Eléments explicitement sombres */
.bg-primary,
.bg-dark,
.bg-danger,
.bg-success,
.bg-info {
    color: #ffffff !important;
}

/* Exception : Text-muted doit rester gris, pas noir */
.text-muted {
    color: #6c757d !important;
}

/* 3. CHASSE AU CAMOUFLAGE (BLEU SUR BLEU) */
/* Réparer les liens dans la sidebar et le header */


/* Boutons primaires : Texte Blanc */
.btn-primary {
    color: #ffffff !important;
}

/* 4. BADGES & ÉTIQUETTES (CONTRASTE) */
.badge {
    font-weight: 600;
    letter-spacing: 0.5px;
}

/* Badges clairs : Texte foncé */
.bg-light,
.badge-light {
    color: #333 !important;
    background-color: #e9ecef !important;
}

/* Badges jaunes (Warning) : Texte foncé (Noir est plus lisible sur jaune) */
.bg-warning,
.badge-warning {
    color: #212529 !important;
    /* Noir pour le contraste sur Jaune */
}

a:not(.btn):not(.nav-link):not(.dropdown-item):not(.card-link):hover::after {
    transform: scaleX(1);
    transform-origin: bottom left;
}

/* --- ANIMATIONS D'ENTRÉE --- */
/* Fade In Staggered pour les listes et tableaux */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translate3d(0, 20px, 0);
    }

    to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
    }
}

.table tbody tr,
.list-group-item,
.card-body .row>div {
    animation: fadeInUp 0.5s ease-out both;
}

/* Staggering (Décalage) jusqu'à 10 éléments */
.table tbody tr:nth-child(1) {
    animation-delay: 0.05s;
}

.table tbody tr:nth-child(2) {
    animation-delay: 0.1s;
}

.table tbody tr:nth-child(3) {
    animation-delay: 0.15s;
}

.table tbody tr:nth-child(4) {
    animation-delay: 0.2s;
}

.table tbody tr:nth-child(5) {
    animation-delay: 0.25s;
}

.table tbody tr:nth-child(6) {
    animation-delay: 0.3s;
}

.table tbody tr:nth-child(7) {
    animation-delay: 0.35s;
}

.table tbody tr:nth-child(8) {
    animation-delay: 0.4s;
}

.table tbody tr:nth-child(9) {
    animation-delay: 0.45s;
}

.table tbody tr:nth-child(10) {
    animation-delay: 0.5s;
}

/* --- CARTES ET CONTAINERS --- */
.card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: none !important;
    overflow: hidden;
    /* Pour contenir les effets */
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1) !important;
}

/* Modales : Entrée Elastic */
.modal.fade .modal-dialog {
    transform: scale(0.8);
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.modal.show .modal-dialog {
    transform: scale(1);
}

/* Inputs : Focus Glow */
.form-control:focus,
.form-select:focus {
    box-shadow: 0 0 0 4px rgba(50, 130, 184, 0.2);
    /* Glow soft blue */
    border-color: var(--ag-secondary);
}

/* =========================================================================
   8. FIX CONTRASTE & TABLEAUX (HIGH CONTRAST PROTOCOL)
   ========================================================================= */

/* 1. TABLEAU ANTIGRAVITY v2.0 (MODERNE & LISIBLE) */
.table {
    border-collapse: separate;
    border-spacing: 0;
    width: 100%;
    border-radius: var(--radius-sm);
    overflow: hidden;
    /* Arrondis les coins */
}

/* En-tête : Fond Sombre -> Texte BLANC */
.table thead th {
    background-color: var(--primary-color) !important;
    color: #ffffff !important;
    border-bottom: 2px solid rgba(0, 0, 0, 0.1);
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.85rem;
    padding: 12px 15px;
    letter-spacing: 0.5px;
    vertical-align: middle;
}

/* Corps : Fond Clair -> Texte SOMBRE */
.table tbody td {
    vertical-align: middle;
    color: var(--text-color) !important;
    /* Force le noir/gris */
    border-bottom: 1px solid #eee;
    padding: 12px 15px;
    font-size: 0.95rem;
}

/* Row Hover : Légère surbrillance */
.table-hover tbody tr:hover {
    background-color: rgba(50, 130, 184, 0.05) !important;
}

/* 2. CHASSE AUX FANTÔMES (BLANC SUR BLANC) */
/* Force le texte sombre par défaut dans les cartes et modales */
.card,
.modal-content,
.bg-white {
    color: var(--text-color);
}

/* Exception : Eléments explicitement sombres */
.bg-primary,
.bg-dark,
.bg-danger,
.bg-success,
.bg-info {
    color: #ffffff !important;
}

/* Exception : Text-muted doit rester gris, pas noir */
.text-muted {
    color: #6c757d !important;
}

/* 3. CHASSE AU CAMOUFLAGE (BLEU SUR BLEU) */
/* Réparer les liens dans la sidebar et le header */


/* Boutons primaires : Texte Blanc */
.btn-primary {
    color: #ffffff !important;
}

/* 4. BADGES & ÉTIQUETTES (CONTRASTE) */
.badge {
    font-weight: 600;
    letter-spacing: 0.5px;
}

/* Badges clairs : Texte foncé */
.bg-light,
.badge-light {
    color: #333 !important;
    background-color: #e9ecef !important;
}

/* Badges jaunes (Warning) : Texte foncé (Noir est plus lisible sur jaune) */
.bg-warning,
.badge-warning {
    color: #212529 !important;
    /* Noir pour le contraste sur Jaune */
}

/* Badges foncés : Texte blanc */
.bg-primary,
.bg-success,
.bg-danger,
.bg-info,
.bg-dark {
    color: #ffffff !important;
}

/* =========================================================================
   9. MOBILE OPTIMIZATION (RESPONSIVE CHAMELEON)
   ========================================================================= */
@media (max-width: 768px) {

    /* --- A. NAVIGATION MOBILE (HAMBURGER) --- */
    .ag-sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1045;
        display: none;
        /* Hidden by default */
    }

    .ag-sidebar-overlay.active {
        display: block;
    }

    /* --- C. TABS MOBILES (SCROLLABLE) --- */
    .nav-tabs-mobile-scroll {
        flex-wrap: nowrap;
        white-space: nowrap;
        overflow-x: auto;
        overflow-y: hidden;
        /* -webkit-overflow-scrolling removed - obsolete property */
        border-bottom: 2px solid #dee2e6;
        padding-bottom: 5px;
    }

    .nav-tabs-mobile-scroll .nav-link {
        font-size: 0.9rem;
        padding: 0.5rem 1rem;
    }

    /* --- B. TABLEAUX -> CARTE (CARD VIEW) --- */
    /* On force les tables à devenir des blocs */
    .table-mobile-cards,
    .table-mobile-cards thead,
    .table-mobile-cards tbody,
    .table-mobile-cards th,
    .table-mobile-cards td,
    .table-mobile-cards tr {
        display: block;
    }

    /* On cache l'en-tête */
    .table-mobile-cards thead tr {
        position: absolute;
        top: -9999px;
        left: -9999px;
    }

    /* Chaque ligne devient une carte */
    .table-mobile-cards tr {
        margin-bottom: 1rem;
        background: #fff;
        border-radius: var(--radius-main);
        box-shadow: var(--shadow-card);
        border: 1px solid rgba(0, 0, 0, 0.05);
        overflow: hidden;
    }

    /* Chaque cellule devient une ligne Flex */
    .table-mobile-cards td {
        border: none;
        border-bottom: 1px solid #eee;
        position: relative;
        padding-left: 50%;
        padding-top: 12px;
        padding-bottom: 12px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        text-align: right;
    }

    .table-mobile-cards td:last-child {
        border-bottom: none;
    }

    /* Le "Label" (data-label) s'affiche à gauche en gras */
    .table-mobile-cards td::before {
        content: attr(data-label);
        font-weight: 700;
        text-transform: uppercase;
        font-size: 0.75rem;
        color: var(--text-secondary);
        text-align: left;
        flex: 1;
        padding-right: 10px;
    }

    /* --- C. ERGONOMIE TACTILE --- */
    .btn {
        min-height: 44px;
        /* Standard Touch Target */
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    .btn-sm {
        min-height: 38px;
        font-size: 0.9rem;
    }

    input,
    select,
    textarea {
        font-size: 16px !important;
        /* Empêche Zoom iOS */
    }

    /* Ajustement Header Mobile */
    .header-mobile-adjust {
        padding-top: 10px;
    }

    .navbar-brand {
        font-size: 1.1rem;
    }

    /* Helper pour cacher sur mobile */
    .d-none-mobile {
        display: none !important;
    }

    /* Overlay Menu Style */
    .offcanvas {
        width: 85% !important;
    }
}

/* =========================================================================
   9. AGENDA REDESIGN (CLEAN & HARMONY 2025)
   ========================================================================= */
.agenda-scroll-area .list-group-item {
    border: none;
    border-bottom: 1px solid var(--table-stripe-bg);
    margin-bottom: 4px;
    border-radius: var(--radius-sm) !important;
    background: transparent;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
    padding-left: 15px;
    /* Espace pour le liseré */
}

[data-bs-theme="dark"] .agenda-scroll-area .list-group-item {
    border-bottom-color: rgba(255, 255, 255, 0.05);
}

.agenda-scroll-area .list-group-item:hover {
    background: var(--table-stripe-bg);
    transform: translateX(2px);
}

/* Status Indicators (Left Border via class) */
.agenda-item-today {
    border-left: 4px solid var(--state-warning) !important;
    background: linear-gradient(90deg, rgba(255, 193, 7, 0.05) 0%, transparent 100%) !important;
}

.agenda-item-urgent {
    border-left: 4px solid var(--state-danger) !important;
    background: linear-gradient(90deg, rgba(220, 53, 69, 0.05) 0%, transparent 100%) !important;
}

/* Typography & Contrast Fixes */
.agenda-date-day {
    color: var(--ag-primary);
    font-weight: 700;
}

[data-bs-theme="dark"] .agenda-date-day {
    color: var(--secondary-color);
}

.agenda-title {
    font-weight: 600;
    color: var(--text-main);
}

[data-bs-theme="dark"] .agenda-title {
    color: var(--text-light);
}

/* Badges subtiles */
.badge-subtle-warning {
    background-color: rgba(255, 193, 7, 0.15);
    color: #d97706;
    /* Darker orange/yellow */
}

[data-bs-theme="dark"] .badge-subtle-warning {
    color: #ffc107;
}

.badge-subtle-danger {
    background-color: rgba(220, 53, 69, 0.15);
    color: var(--state-danger);
}

[data-bs-theme="dark"] .badge-subtle-danger {
    color: #ff6b6b;
}

.badge-subtle-info {
    background-color: rgba(23, 162, 184, 0.15);
    color: var(--state-info);
}

/* Fix Dark Mode Tabs */
[data-bs-theme="dark"] .nav-tabs .nav-link.active {
    background-color: rgba(255, 255, 255, 0.05) !important;
    color: #ffffff !important;
    border-color: rgba(255, 255, 255, 0.1) rgba(255, 255, 255, 0.1) transparent !important;
    border-bottom: none !important;
    box-shadow: inset 0 3px 0 var(--ag-secondary);
}

[data-bs-theme="dark"] .nav-tabs .nav-link:hover {
    border-color: rgba(255, 255, 255, 0.05);
    background-color: rgba(255, 255, 255, 0.05);
}

[data-bs-theme="dark"] .nav-tabs {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}


/* =========================================================================
   10. AGENDA TIMELINE (MODERN 2025)
   ========================================================================= */

/* --- Navigation Pills (Segmented) --- */
.nav-pills-custom {
    background: rgba(0, 0, 0, 0.05);
    /* Light gray background container */
    padding: 4px;
    border-radius: 50px;
    /* Capsule shape */
    display: inline-flex;
}

[data-bs-theme="dark"] .nav-pills-custom {
    background: rgba(255, 255, 255, 0.1);
}

.nav-pills-custom .nav-link {
    border-radius: 50px;
    padding: 0.4rem 1.2rem;
    color: var(--text-secondary);
    font-weight: 600;
    font-size: 0.85rem;
    transition: all 0.3s ease;
}

.nav-pills-custom .nav-link.active {
    background-color: var(--ag-primary);
    color: #ffffff !important;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

[data-bs-theme="dark"] .nav-pills-custom .nav-link.active {
    background-color: var(--ag-secondary);
    /* Lighter blue in dark mode */
}

/* --- Vertical Timeline --- */
.ag-timeline {
    position: relative;
    padding-left: 10px;
}

/* The Vertical Line */
.ag-timeline::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 85px;
    /* Adjust based on Date column width */
    width: 2px;
    background: rgba(0, 0, 0, 0.1);
}

[data-bs-theme="dark"] .ag-timeline::before {
    background: rgba(255, 255, 255, 0.1);
}

.ag-timeline-item {
    position: relative;
    padding-bottom: 25px;
    /* Space between items */
    display: flex;
    align-items: flex-start;
}

.ag-timeline-item:last-child {
    padding-bottom: 0;
}

/* Date Column */
.ag-timeline-date {
    width: 70px;
    /* Fixed width */
    text-align: right;
    padding-right: 15px;
    flex-shrink: 0;
}

.ag-tl-day {
    font-size: 1.3rem;
    font-weight: 800;
    line-height: 1;
    color: var(--text-main);
}

.ag-tl-month {
    font-size: 0.7rem;
    text-transform: uppercase;
    color: var(--text-secondary);
    font-weight: 600;
}

/* The Dot/Node */
.ag-timeline-marker {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--ag-primary);
    border: 2px solid var(--bg-card);
    /* Cutout effect */
    position: absolute;
    left: 80px;
    /* Center on the line (85px - 1/2 width) */
    top: 5px;
    /* Align with text */
    z-index: 10;
    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.05);
}

.ag-timeline-marker.marker-urgent {
    background: var(--state-danger);
}

.ag-timeline-marker.marker-today {
    background: var(--state-warning);
}

.ag-timeline-marker.marker-future {
    background: var(--state-info);
}

/* Content Column */
.ag-timeline-content {
    flex-grow: 1;
    padding-left: 30px;
    /* Space after line */
    padding-top: 0;
}

.ag-tl-title {
    font-weight: 700;
    font-size: 1rem;
    color: var(--text-main);
    margin-bottom: 2px;
}

[data-bs-theme="dark"] .ag-tl-day,
[data-bs-theme="dark"] .ag-tl-title {
    color: var(--text-light);
}

.ag-tl-subtitle {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

/* Hover Effect */
.ag-timeline-item:hover .ag-timeline-marker {
    transform: scale(1.3);
    transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* =========================================================================
   11. AGENDA MODERN LIST (iOS STYLE 2025)
   ========================================================================= */

/* --- Segmented Control (Navigation) --- */
.segmented-control {
    background-color: #e9ecef;
    /* Light gray track */
    border-radius: 8px;
    padding: 3px;
    display: flex;
    position: relative;
    width: 100%;
}

[data-bs-theme="dark"] .segmented-control {
    background-color: rgba(255, 255, 255, 0.1);
}

.segmented-control .nav-link {
    flex: 1;
    text-align: center;
    border-radius: 6px;
    color: var(--text-secondary);
    font-weight: 600;
    font-size: 0.85rem;
    padding: 6px 12px;
    border: none;
    background: transparent;
    transition: all 0.2s ease;
}

.segmented-control .nav-link:hover {
    color: var(--text-main);
}

[data-bs-theme="dark"] .segmented-control .nav-link:hover {
    color: var(--text-light);
}

.segmented-control .nav-link.active {
    background-color: #ffffff;
    color: var(--ag-primary) !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

[data-bs-theme="dark"] .segmented-control .nav-link.active {
    background-color: var(--bg-card);
    /* Darker card bg */
    color: #ffffff !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

/* --- Modern List Rows --- */
.ag-modern-list {
    display: flex;
    flex-direction: column;
}

.ag-row {
    display: flex;
    align-items: center;
    padding: 15px 15px 15px 0;
    /* No left padding initially */
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    /* Very subtle separator */
    transition: background 0.2s;
    cursor: pointer;
}

[data-bs-theme="dark"] .ag-row {
    border-bottom-color: rgba(255, 255, 255, 0.05);
}

.ag-row:hover {
    background-color: rgba(0, 0, 0, 0.02);
}

[data-bs-theme="dark"] .ag-row:hover {
    background-color: rgba(255, 255, 255, 0.02);
}

.ag-row:last-child {
    border-bottom: none;
}

/* Date Column (Left) */
.ag-date-col {
    width: 70px;
    text-align: center;
    flex-shrink: 0;
    border-right: 1px solid rgba(0, 0, 0, 0.05);
    margin-right: 15px;
    padding-right: 5px;
}

[data-bs-theme="dark"] .ag-date-col {
    border-right-color: rgba(255, 255, 255, 0.05);
}

.ag-date-day {
    font-size: 1.2rem;
    font-weight: 700;
    line-height: 1;
    color: var(--text-main);
}

[data-bs-theme="dark"] .ag-date-day {
    color: var(--text-light);
}

.ag-date-month {
    font-size: 0.75rem;
    text-transform: uppercase;
    color: var(--text-secondary);
    font-weight: 600;
}

/* Content Column (Right) */
.ag-content-col {
    flex-grow: 1;
}

.ag-row-title {
    font-weight: 600;
    font-size: 1rem;
    color: var(--text-main);
    margin-bottom: 2px;
}

[data-bs-theme="dark"] .ag-row-title {
    color: var(--text-light);
}

.ag-row-subtitle {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

/* Status Indicator (Dot) */
.ag-status-dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 6px;
}

.dot-urgent {
    background-color: var(--state-danger);
}

.dot-today {
    background-color: var(--state-warning);
}

.dot-future {
    background-color: var(--state-info);
}

/* =========================================================================
   12. MOBILE DASHBOARD OVERRIDES
   ========================================================================= */
@media (max-width: 991.98px) {

    /* Reset Wrapper Scroll on Mobile */
    #dashboard-wrapper {
        overflow-y: auto !important;
        height: auto !important;
    }

    /* Reset Fixed Height Row on Mobile */
    /* Reset Fixed Height Row on Mobile */
    .dashboard-bottom-row {
        height: auto !important;
        min-height: 800px !important;
        /* Ensure enough space */
        flex-wrap: wrap !important;
        padding-bottom: 60px;
        /* Navbar space */
    }

    .agenda-card {
        min-height: 500px !important;
    }
}

/* =========================================================================
   13. SELECT2 DARK MODE FIXES
   ========================================================================= */
[data-bs-theme="dark"] .select2-container--bootstrap-5 .select2-selection {
    background-color: var(--bs-body-bg);
    color: var(--bs-body-color);
    border-color: var(--bs-border-color);
}

[data-bs-theme="dark"] .select2-container--bootstrap-5 .select2-selection__rendered {
    color: var(--bs-body-color) !important;
}

[data-bs-theme="dark"] .select2-dropdown {
    background-color: var(--bg-card);
    border-color: var(--bs-border-color);
}

[data-bs-theme="dark"] .select2-results__option {
    color: var(--text-main);
}

[data-bs-theme="dark"] .select2-results__option--highlighted {
    background-color: var(--ag-primary);
    color: #fff;
}

/* =========================================================================
   14. GLOBAL DARK MODE OVERRIDES (FORCE DARK)
   ========================================================================= */

/* 1. Force Backgrounds to Dark */
[data-bs-theme="dark"] .bg-white {
    background-color: var(--bg-card) !important;
    color: var(--text-main) !important;
}

[data-bs-theme="dark"] .bg-light {
    background-color: rgba(255, 255, 255, 0.05) !important;
    color: var(--text-main) !important;
}

/* 2. Force Cards to Dark */
[data-bs-theme="dark"] .card {
    background-color: var(--bg-card);
    border-color: rgba(255, 255, 255, 0.05);
    color: var(--text-main);
}

/* 3. Force Inputs/Selects to Dark */
[data-bs-theme="dark"] .form-control,
[data-bs-theme="dark"] .form-select,
[data-bs-theme="dark"] .input-group-text {
    background-color: var(--bs-body-bg) !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    color: var(--bs-body-color) !important;
}

[data-bs-theme="dark"] input.bg-light,
[data-bs-theme="dark"] select.bg-light,
[data-bs-theme="dark"] .input-group-text.bg-light {
    background-color: var(--bs-body-bg) !important;
    color: var(--bs-body-color) !important;
}

[data-bs-theme="dark"] .form-control::placeholder {
    color: rgba(255, 255, 255, 0.5);
}

/* 4. Fix Tables in Dark Mode (Financial Dashboard Theme) */
[data-bs-theme="dark"] .table {
    --bs-table-bg: #2c3e50 !important;
    /* Petrol Blue (Card BG) */
    --bs-table-color: #ecf0f1 !important;
    /* Light Text */
    border-color: #34495e !important;
    color: #ecf0f1 !important;
}

[data-bs-theme="dark"] .table thead th {
    background-color: #34495e !important;
    /* Wet Asphalt (Header) */
    color: #ffffff !important;
    border-bottom: 2px solid #1abc9c !important;
    /* Teal Accent */
    text-transform: uppercase;
    font-size: 0.8rem;
    letter-spacing: 0.05em;
}

[data-bs-theme="dark"] .table-hover tbody tr:hover {
    background-color: #34495e !important;
    /* Hover Effect */
}

/* 5. Fix Modals */
[data-bs-theme="dark"] .modal-content {
    background-color: var(--bg-card);
    border-color: rgba(255, 255, 255, 0.1);
}

[data-bs-theme="dark"] .modal-header,
[data-bs-theme="dark"] .modal-footer {
    border-color: rgba(255, 255, 255, 0.1);
}

/* =========================================================================
   15. UNIVERSAL CONTRAST ENFORCEMENT (THE "BLACK HOLE" PREVENTION)
   ========================================================================= */

/* A. THE ANTI-STEALTH RULE (Force dark text to be light) */
[data-bs-theme="dark"] .text-dark,
[data-bs-theme="dark"] .text-black,
[data-bs-theme="dark"] .text-body {
    color: var(--text-main) !important;
}

[data-bs-theme="dark"] .text-muted {
    color: var(--text-secondary) !important;
}

/* B. THE NUCLEAR OPTION (Override inline styles) */
/* Target elements where developer set style="color: black" or #000 */
[data-bs-theme="dark"] [style*="color: #000"],
[data-bs-theme="dark"] [style*="color: black"],
[data-bs-theme="dark"] [style*="color:#000"] {
    color: var(--text-main) !important;
}

/* C. COMPONENT CONTRAST FIXES */

/* Dropdowns */
[data-bs-theme="dark"] .dropdown-menu {
    background-color: var(--bg-card);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

[data-bs-theme="dark"] .dropdown-item {
    color: var(--text-main);
}

[data-bs-theme="dark"] .dropdown-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: #fff;
}

[data-bs-theme="dark"] .dropdown-divider {
    border-top-color: rgba(255, 255, 255, 0.1);
}

/* Badges (Inverted Logic) */
/* If a badge is "warning" (yellow), text MUST be dark for contrast */
[data-bs-theme="dark"] .badge.bg-warning,
[data-bs-theme="dark"] .badge.text-bg-warning {
    color: #000 !important;
}

/* If a badge is "info" (cyan), text MUST be dark */
[data-bs-theme="dark"] .badge.bg-info,
[data-bs-theme="dark"] .badge.text-bg-info {
    color: #000 !important;
}

/* Close Buttons (White X) */
[data-bs-theme="dark"] .btn-close {
    filter: invert(1) grayscale(100%) brightness(200%);
}

/* =========================================================================
   APEX TRINITY - TAB SPACING FIX (affaires_detail.php)
   ========================================================================= */
/* CRITICAL FIX: Force hide ALL inactive tab panes (simplified selector from browser test) */
.tab-pane:not(.active) {
    display: none !important;
    height: 0 !important;
    overflow: hidden !important;
}

/* Remove spacing from tab content container */
#cockpitContent {
    padding: 0 !important;
    margin: 0 !important;
}

#cockpitContent .tab-pane {
    padding: 0 !important;
    margin: 0 !important;
}

#cockpitContent .tab-pane>.card {
    margin: 0 !important;
    border-radius: 0 !important;
}

#cockpitContent .card-header {
    border-radius: 0 !important;
}

/* Fix spacing between header and table */
#cockpitContent .table-responsive {
    margin: 0 !important;
    padding: 0 !important;
}

#cockpitContent .card>.table-responsive {
    margin-top: 0 !important;
}

/* =========================================================================
   COMMANDES LISTE - FILTER INPUTS CONTRAST FIX
   ========================================================================= */
/* Force high contrast for filter inputs in table headers */
.header-wrapper tr:nth-child(2) input[type="text"].form-control,
.header-wrapper tr:nth-child(2) input[type="month"].form-control,
.header-wrapper tr:nth-child(2) select.form-select {
    background-color: #34495e !important;
    color: #ecf0f1 !important;
    border: 1px solid #5d6d7e !important;
    font-size: 0.875rem !important;
    font-weight: 500 !important;
}

.header-wrapper tr:nth-child(2) input[type="text"].form-control::placeholder,
.header-wrapper tr:nth-child(2) input[type="month"].form-control::placeholder {
    color: #bdc3c7 !important;
    opacity: 1 !important;
}

.header-wrapper tr:nth-child(2) input.form-control:focus,
.header-wrapper tr:nth-child(2) select.form-select:focus {
    background-color: #2c3e50 !important;
    color: #ffffff !important;
    border-color: #3498db !important;
    box-shadow: 0 0 0 0.2rem rgba(52, 152, 219, 0.3) !important;
}

.header-wrapper tr:nth-child(2) select.form-select option {
    background-color: #2c3e50 !important;
    color: #ffffff !important;
}